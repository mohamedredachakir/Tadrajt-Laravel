# Ø§Ù„ÙˆØ³ÙŠØ· (Middleware)

## ðŸ›¡ï¸ Ø´Ù†Ùˆ Ù‡Ùˆ MiddlewareØŸ
Ø§Ù„Ù€ **Middleware** Ù‡Ùˆ "Ù…ÙŠÙƒØ§Ù†Ø²Ù…" (Mechanism) Ù„Ù„ØªÙØªÙŠØ´ ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ø§Øª HTTP Ø§Ù„Ù„ÙŠ ÙƒØªÙˆØµÙ„ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¯ÙŠØ§Ù„Ùƒ.
ØªØ®ÙŠÙ„Ùˆ Ø¨Ø­Ø§Ù„ Ø´ÙŠ Ø¨Ø§Ø±Ø§Ø¬ (Checkpoint) Ø£Ùˆ Ø­Ø§Ø±Ø³ Ø£Ù…Ù†. Ù‚Ø¨Ù„ Ù…Ø§ ÙŠØ¯Ø®Ù„ Ø§Ù„Ø·Ù„Ø¨ (Request) Ù„Ù„Ø¯Ø§Ø± (Controller)ØŒ Ø®Ø§ØµÙˆ ÙŠØ¯ÙˆØ² Ù…Ù† Ø§Ù„ØªÙØªÙŠØ´.

---

## ðŸ› ï¸ Ø£Ù…Ø«Ù„Ø© Ù„Ù„Ø§Ø³ØªØ¹Ù…Ø§Ù„
-   **Authentication:** ØªØ£ÙƒØ¯ ÙˆØ§Ø´ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù‚Ø¨Ù„ Ù…Ø§ ØªØ®Ù„ÙŠÙ‡ ÙŠØ´ÙˆÙ Ø§Ù„Ù€ Dashboard.
-   **TrimStrings:** Ø­ÙŠØ¯ Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ø²Ø§ÙŠØ¯Ø© Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª (Input).
-   **Logging:** Ø³Ø¬Ù„ ÙƒÙ„ Ø·Ù„Ø¨ Ø¬Ø§ Ù„Ù„Ø³ÙŠØ±ÙØ± ÙÙ…Ù„Ù (Log file).
-   **CSRF Protection:** ØªØ£ÙƒØ¯ Ø¨Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨ Ø¬Ø§ÙŠ Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¯ÙŠØ§Ù„Ù†Ø§ Ù…Ø§Ø´ÙŠ Ù‡Ø¬Ù…Ø© Ø®Ø§Ø±Ø¬ÙŠØ©.

---

## âœï¸ Ø¥Ù†Ø´Ø§Ø¡ Middleware
```bash
php artisan make:middleware EnsureTokenIsValid
```

Ø§Ù„ÙƒÙˆØ¯ ÙƒÙŠÙƒÙˆÙ† ÙÙ€ `app/Http/Middleware`.
Ø´ÙƒÙ„ Ø§Ù„Ø¯Ø§Ù„Ø© `handle`:
```php
public function handle(Request $request, Closure $next): Response
{
    if ($request->input('token') !== 'my-secret-token') {
        return redirect('/home'); // Ù…Ù†Ø¹Ù†Ø§ Ø§Ù„Ø·Ù„Ø¨
    }

    return $next($request); // Ø¯ÙˆØ²Ù†Ø§ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø¬Ø§ÙŠØ©
}
```

---

## ðŸ”— ØªØ³Ø¬ÙŠÙ„ Middleware
Ø¨Ø§Ø´ Ù„Ø§Ø±Ø§Ú¤ÙŠÙ„ ÙŠØ¹Ø±Ù Ù‡Ø§Ø¯ MiddlewareØŒ Ø®Ø§ØµÙƒ ØªØ³Ø¬Ù„Ùˆ (Register) ÙÙ€ `app/Http/Kernel.php` (ÙÙ€ Laravel 10 ÙˆØªØ­Øª) Ø£Ùˆ ÙÙ€ `bootstrap/app.php` (ÙÙ€ Laravel 11).

ØªÙ‚Ø¯Ø± ØªØ²ÙŠØ¯Ùˆ ÙƒÙ€:
1.  **Global Middleware:** ÙƒÙŠØ®Ø¯Ù… Ø¹Ù„Ù‰ ÙƒØ§Ø¹ Ø§Ù„Ù€ Routes.
2.  **Route Middleware:** ÙƒØªØ³Ù…ÙŠÙ‡ (Alias) ÙˆÙƒØªØ¹Ø·ÙŠÙ‡ Ù„Ù€ Routes Ù…Ø­Ø¯Ø¯ÙŠÙ†.

Ø§Ø³ØªØ¹Ù…Ø§Ù„Ù‡ ÙØ§Ù„Ù€ Route:
```php
Route::get('/dashboard', function () {
    // ...
})->middleware(['auth', 'verified']);
```

---

## ðŸ’¡ Ø§Ù„Ø®Ù„Ø§ØµØ©
Ø§Ù„Ù€ Middleware Ù‡Ùˆ Ø£Ø¯Ø§Ø© Ù‚ÙˆÙŠØ© Ù„Ø­Ù…Ø§ÙŠØ© ÙˆÙ…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ù‚Ø¨Ù„ Ù…Ø§ ØªÙˆØµÙ„ Ù„Ù„ÙƒÙˆØ¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø¯ÙŠØ§Ù„Ùƒ.
